<!DOCTYPE html>
<html style="zoom: 115%">

<title>WeGo Log In Page</title>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>replit</title>
  <link rel="icon" type="image/x-icon" href="../static/WeGo.png" />
  <link href="../styles/style.css" rel="stylesheet"  type="text/css" />
</head>
<br>

<body>
  <br></br>
  <center>
    <img class="logo" src="../static/WeGo.png" alt="WeGo_logo">
    <br></br>
    <h1 class="title">Welcome to WeGo!</h1>
  </center>
  <br>
  <center>
    <div class="box" method="POST" name="LoginForm">
      <h1 class="textInForm">Log In</h1>
      <div class="container">
        <br>

        <div class="username">
        <label for="username" class="textInForm" ><b>Username:</b></label>
        <input type="text" placeholder=" johndoe" id="username">
        <br></br>
        </div>
       
        <label for="password" class="textInForm"><b>Password:</b></label>
        <input type="password" placeholder=" *********" id="password">
        <br></br>
        
        <button type="submit" class="boxButton" onclick="validateUser()">Log in</button>
        <br></br>
    
        Don't have an account?
        <a href="signup_page.html">Sign up</a>
      </div>
    </div>
  </center>
</body>
<script>
   function validateUser() {
    var username = document.getElementById("username").value;
    var password = document.getElementById("password").value;

    if (username == "") {
      alert("Please Input Your Username.");
      document.LoginForm.username.focus();
      window.location.href = "index.html";
      return false;
    }

    else if (password == "") {
      alert("Please Input Your Password.");
      document.LoginForm.password.focus();
      window.location.href = "index.html";
      return false;
    }

    else if (username == "" && password == "") {
      alert("Welcome! " + username + "." + "\nYou Will Now be Redirected to the Order Page.");
      window.location.href = "ordering_page.html";
    }

    else {
      alert("Incorrect Email/Password!");
      window.location.href = "index.html";
    }
  }
</script>

  <script>

      const submitButton = document.getElementById('submit-button');

      submitButton.addEventListener('click', (event) => {
        event.preventDefault();

        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;

        const loginData = {
          username: username,
          password: password
        };

        fetch('/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(loginData)
        })
        .then(response => {
          if (response.ok) {
            return response.json();
          } else {
            throw new Error('Invalid username or password');
          }
        })
        .then(data => {
          console.log('Success:', data);
          alert('Logged in successfully!'); // Alert the user on successful login
        })
        .catch(error => {
          console.error('Error:', error);
          alert('Invalid username or password. Please try again.'); // Alert the user on error
        });
      });

  </script>



</html>